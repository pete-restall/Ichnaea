@inherits NancyRazorViewBase<IncompleteOpenAccountResponse>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Ichnaea.Demo - Open Account</title>
	</head>

	<body>
		<section>
			<h1>Open Account</h1>
			<p>@Model.Message</p>
			<form method="POST" action="@Model.OpenAccountUri">
				<fieldset>
					<legend>Bank Account Details</legend>
					<div>
						<label for="SortCode">Sort Code:</label>
						<input type="text" maxlength="8" required="" name="SortCode" value="@Model.Request.SortCode.InHtmlAttribute()" />
					</div>
					<div>
						<label for="AccountNumber">Account Number:</label>
						<input type="text" maxlength="8" required="" name="AccountNumber" value="@Model.Request.AccountNumber.InHtmlAttribute()" />
					</div>
					<div>
						<label for="Holder">Name of Account Holder:</label>
						<input type="text" maxlength="32" required="" name="Holder" value="@Model.Request.Holder.InHtmlAttribute()" />
					</div>
				</fieldset>
				<button type="submit">Open Account</button>
			</form>
		</section>
		<section>
			<h1>Page Description</h1>
			<p>
				This page has been generated by the AccountAdministrationService.OpenAccount() method and allows an Account to be Opened, a process which
				involves persisting it.
			</p>
			<p>
				Creation of an Account Aggregate Root is done via the AccountFactory class because there is some Ichnaea housekeeping that needs to be
				performed in addition to just 'newing one up'.
			</p>
			<p>
				When creating a new Aggregate Root instance, Ichnaea needs to be told to track it and its Domain Events.  This is accomplished by
				Sourcing an initial 'Created' Domain Event with the IDomainEventTracker&lt;&gt;.AggregateRootCreated() method.  The initial Domain Event
				for an Account in the Demo application's model is called AccountOpened and contains all of the information that will be required to re-create
				it in future when loading from the persistent store; also note the tense of the Domain Event's name.
			</p>
		</section>
	</body>
</html>
